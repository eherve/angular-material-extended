<!-- @format -->

@if (control) {
  <button
    mat-flat-button
    color="primary"
    class="operator-button"
    cdkOverlayOrigin
    #trigger="cdkOverlayOrigin"
    (click)="$event.stopPropagation(); isOpen = !isOpen">
    <span>
      {{ unitNames[control.value] }}
    </span>
  </button>

  <ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayOpen]="isOpen">
    <div class="operator-column" @fade>
      @for (unit of units; track unit) {
        @if (unit !== control.value) {
          <button
            mat-flat-button
            color="primary"
            class="operator-button"
            (click)="control.setValue(unit); isOpen = !isOpen">
            <span>
              {{ unitNames[unit] }}
            </span>
          </button>
        }
      }
    </div>
  </ng-template>
}
